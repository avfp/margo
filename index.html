<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Margo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: #020617; margin: 0; font-family: sans-serif; }
        .custom-gradient { background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Access hooks and icons correctly from the global window
        const { useState, useEffect } = React;
        
        // This helper allows us to use Lucide icons in a browser-friendly way
        const Icon = ({ name, color = "currentColor", size = 24 }) => {
            const LucideIcon = lucide[name];
            return LucideIcon ? <LucideIcon color={color} size={size} /> : null;
        };

        const ProjectMargo = () => {
            const [activeView, setActiveView] = useState('dashboard');
            const [gameData, setGameData] = useState({
                character: { name: 'Hero', title: 'Novice Adventurer', avatar: 'ðŸ§™â€â™€ï¸' },
                paths: {
                    scholar: { name: 'The Scholar', level: 1, xp: 0, maxXp: 100 },
                    author: { name: 'The Author', level: 1, xp: 0, maxXp: 100 },
                    leader: { name: 'The Leader', level: 1, xp: 0, maxXp: 100 },
                    vessel: { name: 'The Vessel', level: 1, xp: 0, maxXp: 100 }
                },
                dailyHabits: [],
                completedToday: [],
                totalXP: 0
            });

            // Load Data
            useEffect(() => {
                const saved = localStorage.getItem('projectMargoData');
                if (saved) setGameData(JSON.parse(saved));
            }, []);

            // Navigation Component
            const Nav = () => (
                <nav className="p-4 bg-slate-900 border-b-2 border-purple-500 flex justify-between items-center text-white">
                    <h1 className="text-xl font-bold flex items-center gap-2">âœ¨ Project Margo</h1>
                    <div className="flex gap-4 text-sm font-medium">
                        <button onClick={() => setActiveView('dashboard')} className={activeView === 'dashboard' ? 'text-purple-400' : ''}>Dashboard</button>
                        <button onClick={() => setActiveView('quests')} className={activeView === 'quests' ? 'text-purple-400' : ''}>Quests</button>
                    </div>
                </nav>
            );

            // Dashboard View
            const Dashboard = () => (
                <div className="p-6 space-y-6">
                    <div className="custom-gradient rounded-2xl p-8 border-2 border-purple-500/50 shadow-xl flex items-center gap-6">
                        <div className="text-6xl">{gameData.character.avatar}</div>
                        <div>
                            <h2 className="text-3xl font-bold text-white">{gameData.character.name}</h2>
                            <p className="text-purple-300">{gameData.character.title}</p>
                            <div className="mt-2 text-cyan-400 font-bold">Total XP: {gameData.totalXP}</div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {Object.entries(gameData.paths).map(([key, path]) => (
                            <div key={key} className="bg-slate-800 p-6 rounded-xl border border-white/10">
                                <h3 className="text-white font-bold text-lg capitalize">{path.name}</h3>
                                <p className="text-yellow-400">Level {path.level}</p>
                                <div className="mt-2 w-full bg-black/40 h-2 rounded-full overflow-hidden">
                                    <div className="bg-cyan-500 h-full" style={{width: `${(path.xp / path.maxXp) * 100}%`}}></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            // Simple Quest View
            const Quests = () => (
                <div className="p-6 text-white text-center">
                    <h2 className="text-2xl font-bold mb-4">Daily Quests</h2>
                    <p className="text-slate-400">Add quests to start your journey!</p>
                </div>
            );

            return (
                <div className="min-h-screen">
                    <Nav />
                    <main className="max-w-4xl mx-auto">
                        {activeView === 'dashboard' ? <Dashboard /> : <Quests />}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProjectMargo />);
    </script>
</body>
</html>
